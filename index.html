<html>
<head>
<style>
  body {
    font: 0.7rem sans-serif;
  }

  h1 {
    margin:  10px;
  }

  ul#episodes {
    float: left;
    margin:  0 10px;
    padding: 0;
    width: 35%;
  }

  ul#episodes > li {
    list-style-type: none;
  }

  button {
    border-radius:  7px;
    border: 0;
    background: #191414;
    color: #fff;
    padding:  10px;
    margin:  0 0 3px 0;
    width: 100%;
    cursor: pointer;
  }

  button:hover {
    background: #1Db954;
  }


</style>
  </head>
  <body>
    <h1>Pick an episode...</h1>
          <script src="https://apis.google.com/js/api.js"></script>
      <script>
        /**
         * Sample JavaScript code for youtube.videos.list
         * See instructions for running APIs Explorer code samples locally:
         * https://developers.google.com/explorer-help/code-samples#javascript
         */

        function authenticate() {
          return gapi.auth2.getAuthInstance()
              .signIn({scope: "https://www.googleapis.com/auth/youtube.readonly"})
              .then(function() { console.log("Sign-in successful"); },
                    function(err) { console.error("Error signing in", err); });
        }
        function loadClient() {
          gapi.client.setApiKey("AIzaSyA5u-vl8QfEPHFlIsv-bpto2lZQooywNb4");
          return gapi.client.load("https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest")
              .then(function() { console.log("GAPI client loaded for API"); },
                    function(err) { console.error("Error loading GAPI client for API", err); });
        }
        ["items"][0]["snippet"]
        // Make sure the client is loaded and sign-in is complete before calling this method.
        function execute() {
          let re = /(https?:\/\/)?((www\.)?(youtube(-nocookie)?|youtube.googleapis)\.com.*(v\/|v=|vi=|vi\/|e\/|embed\/|user\/.*\/u\/\d+\/)|youtu\.be\/)([_0-9a-z-]+)/i;
          let id = "https://www.youtube.com/watch?v=z_nr2cTN-9I&list=RDMM&index=2"
          
          return gapi.client.youtube.videos.list({
            "part": [
            "snippet, statistics"
                  ],
                  "id": [
                    id.match(re)[7]
                  ]


          })
              .then(function(response) {
                      // Handle the results here (response.result has the parsed body).
                      let initial = response.result.items[0].snippet
                      
                      console.log("all", response.result.items[0].statistics);
                      console.log("published", initial.publishedAt);
                      // console.log("description", initial.description);
                      console.log("img_src", initial.thumbnails.high.url);
                      console.log("video_id", id.match(re)[7])
                    },
                    function(err) { console.error("Execute error", err); });
        }
        // gapi.load("client:auth2", function() {
        //   gapi.auth2.init({client_id: "503493816389-vb7g8t6b046t27dqihv0lkr5c2tev41e.apps.googleusercontent.com"});
        // });
        gapi.load('client')
      </script>
      <button onclick="loadClient()"> load</button>
      <button onclick="execute()">execute</button>

      <h1>PIN THE FILES KWA PINNATA AND GET THE CID</h1>
  </body>
</html>

/**

    ROADMAP BILLBOARD REWARDER
    A platform where users are incentived to find lit content before they get mass adoption.
    WHY?. i think its pretty cool when you have a chance to earn for finding a cool song from early on
    - A cool way to discover music,
    - Get rewarded for you sweet music taste
    - Promotes underground artist work

    FUNCTIONS
    - propose A song that you think will be a banger
    - vote on the proposed song
    - withdraw your rewards

    IDEA
    - maybe a user can only propose for the song they own as NFT
    - there should be a propose fee and vote fee
    - users should have the RANK TOKEN to vote and propose
    - if a song has not reached a certain amount of votes in  a certain, kick the song out?
      then what happens to the tokens invested in it, do they go back to the user ?
    
    - make a no loss investment for users, 
    - users stake their tokens to vote for a song for a certain period of time.
    - Then the protocol uses the staked token and uses yield aggregators to gain some profits and returns
    - rewards to the users and also takes in fee.
    

    QUESTION
    - is there a limit to how many times a user can propose a song?
        @ANS: Yes, for now the limit will be (how many ranks token the user owns / proposal cost)
    
    - should the proposal cost be paid in eth or the rank token?

    - how to do the math for calculation


 **/